<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- CoreUI CSS -->
    <link rel="stylesheet" href="https://unpkg.com/@coreui/coreui/dist/css/coreui.min.css" crossorigin="anonymous">
    <title>유한누리 어드민</title>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <style>
		.dropdown-toggle::after{
			margin-left: 10% !important;
		}
        .dropTitle {
            float: left;
            margin: 0 !important;
            text-align: left;
			width:inherit;
        }
        .custom-list-item {
            width: 100%;
        }
        .custom-btn-position {
            float: right;
            margin-top: -7px;
        }
        .btn-secondary {
            background-color: #fafbfd;
        }
        .btn-secondary:hover {
            background-color: #fafbfd;
        }
        .btn-secondary:focus {
            background-color: #fafbfd;
        }
        .show>.btn-secondary.dropdown-toggle {
            background-color: #fafbfd !important;
        }
    </style>
</head>

<body class="c-app">
	<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
		  <div class="modal-dialog" role="document">
			<div class="modal-content">
			  <div class="modal-header">
				<h5 class="modal-title" id="deleteModalLabel">항목 삭제 하기</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				  <span aria-hidden="true">&times;</span>
				</button>
			  </div>
			  <div class="modal-body">
				<form>
				  <div class="form-group">
					<label for="type-name" class="col-form-label">다시 한번 더 삭제할 항목을 입력시켜주세요!</label>
					<input type="text" class="form-control" id="delete-type" placeholder="항목 이름을 작성해주세요.">
				  </div>
					<p id="deleteError"></p>
				</form>
			  </div>
			  <div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal" onClick="exitModal()">닫기</button>
				<button type="button" class="btn btn-primary" id="deleteBtn" onClick="deleteCheck('#delete-type')">삭제하기</button>
			  </div>
			</div>
		  </div>
	</div>
	<div class="modal fade" id="updateModal" tabindex="-1" role="dialog" aria-labelledby="updateModalLabel" aria-hidden="true">
		  <div class="modal-dialog" role="document">
			<div class="modal-content">
			  <div class="modal-header">
				<h5 class="modal-title" id="updateModalLabel">항목 수정 하기</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				  <span aria-hidden="true">&times;</span>
				</button>
			  </div>
				<div class="modal-body">
				<form>
				  <div class="form-group">
					<label for="type-name" class="col-form-label">수정 대상</label>
					<input type="text" class="form-control" id="update-name" readonly>
				  </div>
				</form>
			  </div>
			  <div class="modal-body">
				<form>
				  <div class="form-group">
					<label for="type-name" class="col-form-label">수정 하실 이름을 입력해주세요!</label>
					<input type="text" class="form-control" id="update-text" placeholder="항목 이름을 작성해주세요.">
				  </div>
				</form>
			  </div>
			  <div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">닫기</button>
				<button type="button" class="btn btn-primary" id="updateBtn" onClick="updateName('#update-text')">수정하기</button>
			  </div>
			</div>
		  </div>
	</div>
    <div class="c-sidebar c-sidebar-dark c-sidebar-fixed c-sidebar-lg-show" id="sidebar">
        <div class="c-sidebar-brand d-lg-down-none">
            <svg class="c-sidebar-brand-full" width="118" height="46" alt="CoreUI Logo">
                <use xlink:href="assets/brand/coreui.svg#full"></use>
            </svg>
            <svg class="c-sidebar-brand-minimized" width="46" height="46" alt="CoreUI Logo">
                <use xlink:href="assets/brand/coreui.svg#signet"></use>
            </svg>
        </div>
        <%- include ('adminNav'); -%>
        <button class="c-sidebar-minimizer c-class-toggler" type="button" data-target="_parent"
            data-class="c-sidebar-minimized"></button>
    </div>
    <div class="c-wrapper c-fixed-components">
        <header class="c-header c-header-light c-header-fixed c-header-with-subheader">
            <button class="c-header-toggler c-class-toggler d-lg-none mfe-auto" type="button" data-target="#sidebar"
                data-class="c-sidebar-show">
                <svg class="c-icon c-icon-lg">
                    <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-menu"></use>
                </svg>
            </button><a class="c-header-brand d-lg-none" href="#">
                <svg width="118" height="46" alt="CoreUI Logo">
                    <use xlink:href="assets/brand/coreui.svg#full"></use>
                </svg></a>
            <button class="c-header-toggler c-class-toggler mfs-3 d-md-down-none" type="button" data-target="#sidebar"
                data-class="c-sidebar-lg-show" responsive="true">
                <svg class="c-icon c-icon-lg">
                    <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-menu"></use>
                </svg>
            </button>
            <ul class="c-header-nav d-md-down-none">
                <li class="c-header-nav-item px-3"><a class="c-header-nav-link" href="#">Dashboard</a></li>
                <li class="c-header-nav-item px-3"><a class="c-header-nav-link" href="#">Users</a></li>
                <li class="c-header-nav-item px-3"><a class="c-header-nav-link" href="#">Settings</a></li>
            </ul>
            <ul class="c-header-nav ml-auto mr-4">
                <li class="c-header-nav-item d-md-down-none mx-2"><a class="c-header-nav-link" href="#" style="background:red;">
                        <svg class="c-icon">
                            <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-bell"></use>
                        </svg></a></li>
                <li class="c-header-nav-item d-md-down-none mx-2"><a class="c-header-nav-link" href="#" style="background:red;">
                        <svg class="c-icon">
                            <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-list-rich"></use>
                        </svg></a></li>
                <li class="c-header-nav-item d-md-down-none mx-2"><a class="c-header-nav-link" href="#" style="background:red;">
                        <svg class="c-icon">
                            <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-envelope-open"></use>
                        </svg></a></li>
                <!--<li class="c-header-nav-item dropdown"><a class="c-header-nav-link" data-toggle="dropdown" href="#"
                        role="button" aria-haspopup="true" aria-expanded="false">
                        <div class="c-avatar"><img class="c-avatar-img" src="assets/img/avatars/6.jpg"
                                alt="user@gmail.com"></div>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right pt-0">
                        <div class="dropdown-header bg-light py-2"><strong>Account</strong></div><a
                            class="dropdown-item" href="#">
                            <svg class="c-icon mr-2">
                                <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-bell"></use>
                            </svg> Updates<span class="badge badge-info ml-auto">42</span></a><a class="dropdown-item"
                            href="#">
                            <svg class="c-icon mr-2">
                                <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-envelope-open"></use>
                            </svg> Messages<span class="badge badge-success ml-auto">42</span></a><a
                            class="dropdown-item" href="#">
                            <svg class="c-icon mr-2">
                                <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-task"></use>
                            </svg> Tasks<span class="badge badge-danger ml-auto">42</span></a><a class="dropdown-item"
                            href="#">
                            <svg class="c-icon mr-2">
                                <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-comment-square"></use>
                            </svg> Comments<span class="badge badge-warning ml-auto">42</span></a>
                        <div class="dropdown-header bg-light py-2"><strong>Settings</strong></div><a
                            class="dropdown-item" href="#">
                            <svg class="c-icon mr-2">
                                <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-user"></use>
                            </svg> Profile</a><a class="dropdown-item" href="#">
                            <svg class="c-icon mr-2">
                                <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-settings"></use>
                            </svg> Settings</a><a class="dropdown-item" href="#">
                            <svg class="c-icon mr-2">
                                <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-credit-card"></use>
                            </svg> Payments<span class="badge badge-secondary ml-auto">42</span></a><a
                            class="dropdown-item" href="#">
                            <svg class="c-icon mr-2">
                                <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-file"></use>
                            </svg> Projects<span class="badge badge-primary ml-auto">42</span></a>
                        <div class="dropdown-divider"></div><a class="dropdown-item" href="#">
                            <svg class="c-icon mr-2">
                                <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-lock-locked"></use>
                            </svg> Lock Account</a><a class="dropdown-item" href="/user/logout">
                            <svg class="c-icon mr-2">
                                <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-account-logout"></use>
                            </svg> Logout</a>
                    </div>
                </li>-->
            </ul>
            <div class="c-subheader px-3">
                <!-- Breadcrumb-->
                <ol class="breadcrumb border-0 m-0">
                    <li class="breadcrumb-item">Home</li>
                    <li class="breadcrumb-item"><a href="#">Admin</a></li>
                    <li class="breadcrumb-item active">Dashboard</li>
                    <!-- Breadcrumb Menu-->
                </ol>
            </div>
        </header>
        <div class="c-body">
            <main class="c-main">
                <div class="container-fluid">
                    <div class="fade-in">
                        <div class="card">
                            <div class="card-body">
                                <div class="m-auto" style="width:80%;">
                                    <div class="m-auto" style="width:85%;">
                                        <h4 class="card-title">상담항목 수정/삭제</h4>
                                        <div class="btn-group" role="group" style="width:inherit">
                                            <button id="btnGroupDrop1" type="button"
                                                class="btn-lg btn-secondary  dropdown-toggle" data-toggle="dropdown"
                                                aria-expanded="false" style="width:inherit;">
                                                <p class="dropTitle">자가진단</p>
                                            </button>
                                            <div class="dropdown-menu" aria-labelledby="btnGroupDrop1" style="width:inherit;">
												<% types.forEach(function(v,i){%>
												<li class="list-group-item dropdown-item custom-list-item">
                                                    <%= v.typename%>
                                                    <div class="text-right custom-btn-position">
                                                        <button class="btn btn-outline-success" data-toggle="modal" data-target="#updateModal"
																id="showUpdateModalBtn" onClick="giveName(`<%=v.typename%>`)">v</button>
                                                        <button class="btn btn-outline-danger" data-toggle="modal" data-target="#deleteModal"
																id="showDeleteModalBtn" onClick="setChoiceType(`<%=v.typename%>`)">X</button>
                                                    </div>
                                                </li>
												<% }) %>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            <footer class="c-footer">
                <div><a href="https://coreui.io">CoreUI</a> &copy; 2020 creativeLabs.</div>
                <div class="ml-auto">Powered by&nbsp;<a href="https://coreui.io/">CoreUI</a></div>
            </footer>
        </div>
    </div>
    <script>
		let choiceType="";
		
		const setChoiceType=(chType)=>{
			choiceType=chType;
		}
		
		function exitModal(e){
			
		}
		
		function deleteCheck(deleteType){
			const updateItem=$(deleteType).val();
			if(deleteItem===choiceType){
				$.ajax({
							type:'POST',
							dataType:'json',
							url:'./removeFormItem',
							async:true,
							data:{"formItem" : item},
							success:function(data){
								if(data==='ok'){
									window.location.reload();
								}
							}
						})
				item="";
			}else{
				$('#deleteError').css('color','#f05454');
				$('#deleteError').text('삭제하시려는 항목의 이름이 달라요!');
			}
			
		}
		function updateName(updateType){
			const sendObject={
				item:$(updateType).val(),
				pastItem:$('#update-name').val(),
			}
			$.ajax({
				type:'POST',
				dateType:'json',
				url:'./updateFormItem',
				async:true,
				data:{"formItem":JSON.stringify(sendObject)},
				success:function(data){
					if(data==='ok'){
						window.location.reload();
					}
				}
			});
		}
		function giveData(str){
			document.querySelector('#update-name').value=str;
			document.querySelector('#update-text').value='';
		}
    </script>
    <script src="https://unpkg.com/@coreui/coreui/dist/js/coreui.bundle.min.js"></script>
</body>

</html>