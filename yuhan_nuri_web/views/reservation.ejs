<!DOCTYPE html>
<html>
	<head>
		<title>예약 페이지</title>
		<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
		<script src="https://code.jquery.com/jquery-latest.min.js"></script>
		<script>
        $(function () {
            $('#reserv_date_id').change(function() {
				$.ajax({
					type: "POST",
					dataType: "json",
					url: "./postTest",
					async: true,
					data: { "sendAjax" : $('#reserv_date_id').val() },
					
					success: function (data) {
						console.info(data);
						
						for(var j=9; j<=17; j++) {
							$('#time'+j).removeAttr('disabled');
						}
						
						for(var i=0; i<data.rtntime.length; i++) {
							
							if(data.rtntime[i].CNT === 2){
								console.info(data.rtntime[i].CNT);
								$('#time'+ data.rtntime[i].starttime).attr('disabled', true);
							}
							
						}
					}
				});
            });
        });
			
		$(function () {
			$('#reserv_time_id').change(function(){
				let selectTime = $('#reserv_time_id').val();
				let selectDate = $('#reserv_date_id').val(); 
				
				if(selectTime === "default" && selectDate === ""){
					$('#reserv_submit').attr('disabled', true);
				}else{
					
					$('#reserv_submit').attr('disabled', false);
				}
				
					
			});
		})
    </script>
	</head>
	<body>
		<h1>예약</h1>
		<form method="post">
			<label><b>날짜</b></label><br/>
			<input type="date" name="reserv_date" id="reserv_date_id">
			
			<br/><br/>
			
			<label><b>시간</b></label><br/>
		
			<select name="reserv_time" id="reserv_time_id">
    			<option value="default">-</option>
    			<option value="9" id="time9">09</option>
    			<option value="10" id="time10">10</option>
    			<option value="11" id="time11">11</option>
    			<option value="13" id="time13">13</option>
				<option value="14" id="time14">14</option>
    			<option value="15" id="time15">15</option>
				<option value="16" id="time16">16</option>
    			<option value="17" id="time17">17</option>
			
			</select>
			<!-- 예약 시간 상으로 점심시간 제외, 최근 시간 제외, 상담 시작 시간 기준으로 설정 _ 윤권 -->
			<input type="submit" value="예약" id="reserv_submit" disabled>
		</form>
	</body>
</html>